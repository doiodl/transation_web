(this.webpackJsonptranslation_web=this.webpackJsonptranslation_web||[]).push([[0],{115:function(e,t,a){e.exports=a.p+"static/media/logo.a6b2e57f.jpg"},163:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},164:function(e,t,a){},250:function(e,t,a){e.exports=a(324)},324:function(e,t,a){"use strict";a.r(t);a(53),a(56),a(57),a(58),a(59),a(60),a(61),a(62),a(63),a(64),a(65),a(66),a(67),a(68),a(69),a(70),a(71),a(72),a(73),a(74),a(75),a(76),a(77),a(78),a(79),a(81),a(82),a(83),a(84),a(85),a(86),a(87),a(88),a(89),a(90),a(91),a(92),a(93),a(94),a(95);var n=a(0),r=a.n(n),c=a(104),l=a.n(c),o=a(18),i=a.n(o),s=a(7),u=a.n(s),m=a(22),h=a(46),d=a(135),p=a.n(d),f=a(172),g=a.n(f),E=a(171),b=a.n(E),y=(a(288),a(17)),v=a.n(y),j=a(14),O=a.n(j),k=a(21),S=a.n(k),_=a(13),w=a.n(_),C=a(115),U=a.n(C),x=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(v.a,{id:t},r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement("img",{style:{position:"relative",left:"30%"},src:U.a}),r.a.createElement("br",null),r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:a,"data-to":"persik"},r.a.createElement("b",null,"\u0412\u043e\u0439\u0442\u0438")))))},P=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(v.a,{id:t},r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement("img",{style:{position:"relative",left:"30%"},src:U.a}),r.a.createElement("br",null),r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:a,"data-to":"f1"},r.a.createElement("b",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))},T=a(15),I=a(20),H=a.n(I),z=a(45),A=a.n(z),D=a(43),N=a.n(D),J=a(44),L=a.n(J),K=a(132),q=a.n(K),M=a(107),V=a.n(M),W=(a(163),a(168),a(133)),B=a.n(W),G=(a(164),a(96)),Y=a(97),F=a(101),Q=a(52),R=a(30),X=a(99),Z=a(169),$=a.n(Z),ee=a(50),te=a.n(ee),ae=a(51),ne=a.n(ae),re=function(e){function t(e){var a;return Object(G.a)(this,t),(a=Object(F.a)(this,Object(Q.a)(t).call(this,e))).infoId=e,a.but=a.but.bind(Object(R.a)(a)),a.onChangeHandler=a.onChangeHandler.bind(Object(R.a)(a)),a.runScript=a.runScript.bind(Object(R.a)(a)),a.state={massive:[],cur_n:0,msg:""},a}return Object(X.a)(t,e),Object(Y.a)(t,[{key:"but",value:function(e){e.preventDefault(),console.log("\u041f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043a\u043b\u0438\u043a\u043d\u0443\u043b\u0438."),console.log(this.props.fetchedUser);var t=new Date,a=t.getHours()>=10?t.getHours().toString(10):"0"+t.getHours().toString(10),n=t.getMinutes()>=10?t.getMinutes().toString(10):"0"+t.getMinutes().toString(10),r={type_req:"chat",object:{type:"post",info:{id:this.props.fetchedUser.id,name:this.props.fetchedUser.first_name+" "+this.props.fetchedUser.last_name,msg:V()("#message-text").val(),date_msg:a+":"+n,photo_200:this.props.fetchedUser.photo_200}}};this.setState({msg:""}),fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}),this.tick(this)}},{key:"runScript",value:function(e){if("Enter"===e.key&&!e.shiftKey)return this.but(e),!1}},{key:"tick",value:function(e){var t={type_req:"chat",object:{type:"get",current_msg:this.state.cur_n}};fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.add){console.log(t.msg_arr);var a=e.state.massive;e.setState({massive:a.concat(t.msg_arr)}),e.setState({cur_n:e.state.massive.length})}}))}},{key:"onChangeHandler",value:function(e){var t=e.target.value;this.setState({msg:t})}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.tick(e)}),3e3)}},{key:"render",value:function(){return r.a.createElement(S.a,{name:"chats"},r.a.createElement(w.a,{id:"pole",className:"pole",style:{height:"250px",maxHeight:"250px",overflowY:"auto",whiteSpace:"normal"}},this.state.massive.map((function(e,t){return V()("#pole")[0].scrollTop=V()("#pole")[0].scrollHeight,r.a.createElement(te.a,{before:r.a.createElement(ne.a,{src:e.photo_200}),style:{width:"90%",whiteSpace:"normal"}},e.name," ",e.date_msg," ",r.a.createElement("br",null),r.a.createElement("p",{align:"left",style:{wordBreak:"break-word",whiteSpace:"normal"}}," ",e.msg," "))}))),r.a.createElement(w.a,{class:"chat-input"},r.a.createElement(T.a,{id:"chat-form"},r.a.createElement("div",{style:{display:"flex",width:"100%"}},r.a.createElement($.a,{style:{width:"90%"},onKeyPress:this.runScript,id:"message-text",onChange:this.onChangeHandler,class:"chat-form__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:this.state.msg}),r.a.createElement(O.a,{style:{height:"40px"},before:r.a.createElement(q.a,null),class:"chat-form__submit",onClick:this.but})))))}}]),t}(n.Component),ce=Object(T.c)(),le=function(e){var t=Object(n.useState)(0),a=Object(h.a)(t,2),c=a[0],l=a[1];function o(){var t={type:"js_test",type_req:"false",object:{user_id:e.fetchedUser.id}};fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e)}))}return"id"in e.fetchedUser||(e.fetchedUser.id="82815081"),o(),setInterval((function(){o()}),18e4),fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({type:"js_test",type_req:"false",object:{type:"get_url"}})}).then((function(e){return console.log(e),e.json()})).then((function(e){return l(e.url)})),console.log(c),r.a.createElement(v.a,{id:e.id},r.a.createElement(H.a,{left:r.a.createElement(A.a,{onClick:e.go,"data-to":"home"},ce===T.b?r.a.createElement(N.a,null):r.a.createElement(L.a,null))},"\u0422\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f"),r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement(B.a,{width:"device-width",url:c,controls:!0})),r.a.createElement(re,{name:"chat_main",fetchedUser:e.fetchedUser}),r.a.createElement(w.a,null,r.a.createElement(O.a,{size:"xl",level:"2",onClick:e.go,"data-to":"home"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0422\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044e"))))},oe=function(e){var t=e.id,a=e.go,n=e.fetchedUser;return console.log(n.photo_200),r.a.createElement(v.a,{id:t},r.a.createElement(S.a,null,r.a.createElement(w.a,null,n.first_name,", \u043f\u0440\u0438\u0432\u0435\u0442!",r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:a,"data-to":"f2"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e")))))},ie=a(105),se=a.n(ie),ue=a(106),me=a.n(ue),he=Object(T.c)(),de=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(v.a,{id:t},r.a.createElement(H.a,{left:r.a.createElement(A.a,{onClick:a,"data-to":"f1"},he===T.b?r.a.createElement(N.a,null):r.a.createElement(L.a,null))},"\u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b \u0441\u0434\u0430\u0435\u0448\u044c?"),r.a.createElement(se.a,{id:"forms_my"},r.a.createElement(me.a,{id:"math"},"\u041c\u0430\u0442\u0430\u043d"),r.a.createElement(me.a,{id:"rus"},"\u0420\u0443\u0441\u0441\u043a\u0438\u0439")),r.a.createElement(w.a,null,r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:function(e){a(e)},"data-to":"f3"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e"))))},pe=a(134),fe=a.n(pe),ge=Object(T.c)(),Ee=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(v.a,{id:t},r.a.createElement(H.a,{left:r.a.createElement(A.a,{onClick:a,"data-to":"f2"},ge===T.b?r.a.createElement(N.a,null):r.a.createElement(L.a,null))},"\u0412 \u043a\u0430\u043a\u043e\u043c \u0433\u043e\u0434\u0443 \u0441\u0434\u0430\u0435\u0448\u044c \u0415\u0413\u042d?"),r.a.createElement(se.a,{id:"forms_my"},r.a.createElement(fe.a,{id:"year",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0434"})),r.a.createElement(w.a,null,r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:function(e){a(e)},"data-to":"f4"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e"))))},be=a(173),ye=a(170),ve=a.n(ye),je=Object(T.c)(),Oe=function(e){function t(e){var a;return Object(G.a)(this,t),(a=Object(F.a)(this,Object(Q.a)(t).call(this,e))).state={popout:null,actionsLog:[]},a.openDefault=a.openDefault.bind(Object(R.a)(a)),a.closePopout=a.closePopout.bind(Object(R.a)(a)),a.addActionLogItem=a.addActionLogItem.bind(Object(R.a)(a)),a}return Object(X.a)(t,e),Object(Y.a)(t,[{key:"addActionLogItem",value:function(e){this.setState({actionsLog:[].concat(Object(be.a)(this.state.actionsLog),[e])})}},{key:"openDefault",value:function(){var e=this;this.props.chang(r.a.createElement(ve.a,{actions:[{title:"\u041e\u043a\u0435\u0439",autoclose:!0,action:function(){return e.addActionLogItem("\u041f\u0440\u0430\u0432\u043e \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e.")}}],onClose:this.closePopout},r.a.createElement("h2",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0439 \u0441\u0432\u043e\u0438 "),r.a.createElement("p",null,"\u0414\u043e\u0432\u0444\u0432\u0444\u0432.")))}},{key:"closePopout",value:function(){this.props.chang(null)}},{key:"render",value:function(){return r.a.createElement(v.a,{id:this.props.id,popout:this.state.popout},r.a.createElement(H.a,{left:r.a.createElement(A.a,{onClick:this.props.go,"data-to":"f3"},je===T.b?r.a.createElement(N.a,null):r.a.createElement(L.a,null))},"\u0425\u043e\u0447\u0435\u0448\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u043d\u0443\u0441?"),r.a.createElement(w.a,null,r.a.createElement(O.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:this.openDefault,"data-to":"f1"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e")),r.a.createElement("br",null),r.a.createElement(O.a,{style:{position:"relative",left:"35%"},level:"tertiary",onClick:this.openDestructive,"data-to":"f1"},"\u0417\u0430\u0431\u0435\u0440\u0443 \u043f\u043e\u0437\u0436\u0435")))}}]),t}(n.Component),ke=function(){var e=Object(n.useState)("home0"),t=Object(h.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("home1"),o=Object(h.a)(l,2),s=o[0],d=o[1],f=Object(n.useState)(null),E=Object(h.a)(f,2),y=E[0],v=E[1],j=Object(n.useState)(r.a.createElement(b.a,{size:"large"})),O=Object(h.a)(j,2),k=O[0],S=O[1],_=Object(n.useState)("main0"),w=Object(h.a)(_,2),C=(w[0],w[1]),U=Object(n.useState)(null),T=Object(h.a)(U,2),I=T[0],H=T[1];Object(n.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={inputName:t,inputEmail:"t@mail.ru",inputPassword:"1234"},fetch("https://artem4ke.pythonanywhere.com/new_reg/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(typeof e.answer.toString(10));var t="main"+e.answer.toString(10);console.log(t),C(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.sendPromise("VKWebAppGetUserInfo");case 2:return a=t.sent,v(a),console.log(a.id),t.next=7,e(a.id);case 7:S(null);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){a.apply(this,arguments)}()}),[]);var z=function(e){c(e.currentTarget.dataset.to)},A=function(e){d(e.currentTarget.dataset.to)};return r.a.createElement(g.a,{activeView:"main1",popout:k},r.a.createElement(p.a,{id:"main0",activePanel:a},r.a.createElement(x,{id:"home0",fetchedUser:y,go:z}),r.a.createElement(le,{id:"persik",go:z,fetchedUser:y})),r.a.createElement(p.a,{id:"main1",activePanel:s,popout:I},r.a.createElement(P,{id:"home1",fetchedUser:y,go:A}),r.a.createElement(oe,{id:"f1",go:A,fetchedUser:y}),r.a.createElement(de,{id:"f2",go:A,fetchedUser:y}),r.a.createElement(Ee,{id:"f3",go:A,fetchedUser:y}),r.a.createElement(Oe,{id:"f4",go:A,fetchedUser:y,chang:function(e){H(e)}})))};i.a.send("VKWebAppInit"),l.a.render(r.a.createElement(ke,null),document.getElementById("root"))}},[[250,1,2]]]);
//# sourceMappingURL=main.0f3e8e9b.chunk.js.map