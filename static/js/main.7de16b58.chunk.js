(this.webpackJsonptranslation_web=this.webpackJsonptranslation_web||[]).push([[0],{113:function(e,t,a){e.exports=a.p+"static/media/logo.a6b2e57f.jpg"},162:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},163:function(e,t,a){},249:function(e,t,a){e.exports=a(325)},325:function(e,t,a){"use strict";a.r(t);a(58),a(61),a(62),a(63),a(64),a(65),a(66),a(67),a(68),a(69),a(70),a(71),a(72),a(73),a(74),a(75),a(76),a(77),a(78),a(79),a(80),a(81),a(82),a(83),a(84),a(86),a(87),a(88),a(89),a(90),a(91),a(92),a(93),a(94),a(95),a(96),a(97),a(98),a(99),a(100);var n=a(0),r=a.n(n),c=a(105),o=a.n(c),l=a(18),s=a.n(l),i=a(6),u=a.n(i),m=a(20),h=a(51),p=a(134),d=a.n(p),f=a(171),b=a.n(f),g=a(170),E=a.n(g),v=(a(287),a(19)),y=a.n(v),j=a(14),_=a.n(j),O=a(28),k=a.n(O),C=a(13),S=a.n(C),U=a(113),w=a.n(U),T=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(y.a,{id:t},r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement("img",{style:{position:"relative",left:"50%"},src:w.a}),r.a.createElement("br",null),r.a.createElement(_.a,{style:{position:"relative",left:"50%"},size:"l",level:"commerce",onClick:a,"data-to":"persik"},r.a.createElement("b",null,"\u0412\u043e\u0439\u0442\u0438")))))},x=function(e){var t=e.id,a=e.go;e.fetchedUser;return r.a.createElement(y.a,{id:t},r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement("img",{style:{position:"relative",marginLeft:"25%",width:"50%"},src:w.a}),r.a.createElement("br",null),r.a.createElement(_.a,{style:{position:"relative",left:"42%"},size:"l",level:"commerce",onClick:a,"data-to":"f1"},r.a.createElement("b",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))},P=a(15),I=a(27),N=a.n(I),H=a(43),z=a.n(H),J=a(47),D=a.n(J),A=a(48),K=a.n(A),M=a(132),V=a.n(M),q=a(107),W=a.n(q),B=(a(162),a(166),a(133)),G=a.n(B),L=(a(163),a(49)),Y=a(50),F=a(57),Q=a(42),R=a(16),X=a(56),Z=a(167),$=a.n(Z),ee=a(46),te=a.n(ee),ae=a(55),ne=a.n(ae),re=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(Q.a)(t).call(this,e))).infoId=e,a.but=a.but.bind(Object(R.a)(a)),a.onChangeHandler=a.onChangeHandler.bind(Object(R.a)(a)),a.runScript=a.runScript.bind(Object(R.a)(a)),a.state={massive:[],cur_n:0,msg:""},a}return Object(X.a)(t,e),Object(Y.a)(t,[{key:"but",value:function(e){e.preventDefault(),console.log("\u041f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043a\u043b\u0438\u043a\u043d\u0443\u043b\u0438."),console.log(this.props.fetchedUser);var t=new Date,a=t.getHours()>=10?t.getHours().toString(10):"0"+t.getHours().toString(10),n=t.getMinutes()>=10?t.getMinutes().toString(10):"0"+t.getMinutes().toString(10),r={type_req:"chat",object:{type:"post",info:{id:this.props.fetchedUser.id,name:this.props.fetchedUser.first_name+" "+this.props.fetchedUser.last_name,msg:W()("#message-text").val(),date_msg:a+":"+n,photo_200:this.props.fetchedUser.photo_200}}};this.setState({msg:""}),fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}),this.tick(this)}},{key:"runScript",value:function(e){if("Enter"===e.key&&!e.shiftKey)return this.but(e),!1}},{key:"tick",value:function(e){var t={type_req:"chat",object:{type:"get",current_msg:this.state.cur_n}};fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.add){console.log(t.msg_arr);var a=e.state.massive;e.setState({massive:a.concat(t.msg_arr)}),e.setState({cur_n:e.state.massive.length})}}))}},{key:"onChangeHandler",value:function(e){var t=e.target.value;this.setState({msg:t})}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.tick(e)}),3e3)}},{key:"render",value:function(){return r.a.createElement(k.a,{name:"chats"},r.a.createElement(S.a,{id:"pole",className:"pole",style:{height:"250px",maxHeight:"250px",overflowY:"auto",whiteSpace:"normal"}},this.state.massive.map((function(e,t){return W()("#pole")[0].scrollTop=W()("#pole")[0].scrollHeight,r.a.createElement(te.a,{before:r.a.createElement(ne.a,{src:e.photo_200}),style:{width:"90%",whiteSpace:"normal"}},e.name," ",e.date_msg," ",r.a.createElement("br",null),r.a.createElement("p",{align:"left",style:{wordBreak:"break-word",whiteSpace:"normal"}}," ",e.msg," "))}))),r.a.createElement(S.a,{class:"chat-input"},r.a.createElement(P.a,{id:"chat-form"},r.a.createElement("div",{style:{display:"flex",width:"100%"}},r.a.createElement($.a,{style:{width:"90%"},onKeyPress:this.runScript,id:"message-text",onChange:this.onChangeHandler,class:"chat-form__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:this.state.msg}),r.a.createElement(_.a,{style:{height:"40px"},before:r.a.createElement(V.a,null),class:"chat-form__submit",onClick:this.but})))))}}]),t}(n.Component),ce=Object(P.c)(),oe=function(e){var t=Object(n.useState)(0),a=Object(h.a)(t,2),c=a[0],o=a[1];function l(){var t={type:"js_test",type_req:"false",object:{user_id:e.fetchedUser.id}};fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e)}))}return"id"in e.fetchedUser||(e.fetchedUser.id="82815081"),l(),setInterval((function(){l()}),18e4),fetch("https://doiodl.pythonanywhere.com/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({type:"js_test",type_req:"false",object:{type:"get_url"}})}).then((function(e){return console.log(e),e.json()})).then((function(e){return o(e.url)})),console.log(c),r.a.createElement(y.a,{id:e.id},r.a.createElement(N.a,{left:r.a.createElement(z.a,{onClick:e.go,"data-to":"home0"},ce===P.b?r.a.createElement(D.a,null):r.a.createElement(K.a,null))},"\u0422\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f"),r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement(G.a,{width:"device-width",url:c,controls:!0})),r.a.createElement(re,{name:"chat_main",fetchedUser:e.fetchedUser}),r.a.createElement(S.a,null,r.a.createElement(_.a,{size:"xl",level:"2",onClick:e.go,"data-to":"home"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0422\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044e"))))},le=function(e){var t=e.id,a=e.go,n=e.fetchedUser;return n.reg_mas={},r.a.createElement(y.a,{id:t},r.a.createElement(k.a,null,r.a.createElement(S.a,null,n.first_name,", \u043f\u0440\u0438\u0432\u0435\u0442!",r.a.createElement(_.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:a,"data-to":"f2"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e")))))},se=a(106),ie=a.n(se),ue=a(21),me=a.n(ue),he=Object(P.c)(),pe=function(e){var t=e.id,a=e.go,n=e.fetchedUser;return r.a.createElement(y.a,{id:t},r.a.createElement(N.a,{left:r.a.createElement(z.a,{onClick:a,"data-to":"f1"},he===P.b?r.a.createElement(D.a,null):r.a.createElement(K.a,null))},"\u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b \u0441\u0434\u0430\u0435\u0448\u044c?"),r.a.createElement(ie.a,{id:"forms_my"},r.a.createElement(me.a,{id:"2048",name:"151502131",value:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439"},"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439"),r.a.createElement(me.a,{id:"1024",name:"nane",value:"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f"},"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f"),r.a.createElement(me.a,{id:"512",name:"nane",value:"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u044f"},"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u044f"),r.a.createElement(me.a,{id:"256",name:"nane",value:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430"),r.a.createElement(me.a,{id:"128",name:"nane",value:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"),r.a.createElement(me.a,{id:"64",name:"nane",value:"\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"},"\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"),r.a.createElement(me.a,{id:"32",name:"151093324",value:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u0431\u0430\u0437\u043e\u0432\u0430\u044f"},"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u0431\u0430\u0437\u043e\u0432\u0430\u044f"),r.a.createElement(me.a,{id:"16",name:"151093324",value:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044c\u043d\u0430\u044f"},"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044c\u043d\u0430\u044f"),r.a.createElement(me.a,{id:"8",name:"151857790",value:"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435"},"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435"),r.a.createElement(me.a,{id:"4",name:"151406643",value:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"),r.a.createElement(me.a,{id:"2",name:"149450743",value:"\u0424\u0438\u0437\u0438\u043a\u0430"},"\u0424\u0438\u0437\u0438\u043a\u0430"),r.a.createElement(me.a,{id:"1",name:"nane",value:"\u0425\u0438\u043c\u0438\u044f"},"\u0425\u0438\u043c\u0438\u044f")),r.a.createElement(S.a,null,r.a.createElement(_.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:function(e){var t=document.getElementsByClassName("Checkbox__input"),r=0;n.objects=[];for(var c=0;c<t.length;c++)if(!0===t[c].checked&&(r|=parseInt(t[c].id,"10"),"nane"!==t[c].name)){var o=[t[c].name,t[c].value];n.objects.push(o)}0!==r&&(n.reg_mas.num=r,a(e))},"data-to":"f3"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e"))))},de=a(168),fe=a(169),be=a.n(fe),ge=Object(P.c)(),Ee=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(Q.a)(t).call(this,e))).state={email:"",purpose:""},a.onChange=a.onChange.bind(Object(R.a)(a)),a.set_sub=a.set_sub.bind(Object(R.a)(a)),a}return Object(X.a)(t,e),Object(Y.a)(t,[{key:"onChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(de.a)({},a,n))}},{key:"set_sub",value:function(e){""!==this.state.purpose&&(this.props.fetchedUser.reg_mas.year=parseInt(this.state.purpose,10),this.props.go(e))}},{key:"render",value:function(){var e=this.state,t=(e.email,e.purpose);return r.a.createElement(y.a,{id:this.props.id},r.a.createElement(N.a,{left:r.a.createElement(z.a,{onClick:this.props.go,"data-to":"f2"},ge===P.b?r.a.createElement(D.a,null):r.a.createElement(K.a,null))},"\u0412 \u043a\u0430\u043a\u043e\u043c \u0433\u043e\u0434\u0443 \u0441\u0434\u0430\u0435\u0448\u044c \u0415\u0413\u042d?"),r.a.createElement(ie.a,{id:"forms_my"},r.a.createElement(be.a,{top:"\u0413\u043e\u0434 \u0441\u0434\u0430\u0447\u0438",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0433\u043e\u0434 \u0441\u0434\u0430\u0447\u0438 \u0415\u0413\u042d",status:t?"valid":"error",bottom:t?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438 \u0433\u043e\u0434",onChange:this.onChange,value:t,name:"purpose"},r.a.createElement("option",{value:"2020"},"2020"),r.a.createElement("option",{value:"2021"},"2021"),r.a.createElement("option",{value:"0"},"\u0414\u0440\u0443\u0433\u043e\u0435"))),r.a.createElement(S.a,null,r.a.createElement(_.a,{style:{position:"relative",left:"35%"},size:"l",level:"commerce",onClick:this.set_sub,"data-to":"f4"},r.a.createElement("b",null,"\u0425\u043e\u0440\u043e\u0448\u043e"))))}}]),t}(n.Component),ve=Object(P.c)(),ye=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(F.a)(this,Object(Q.a)(t).call(this,e))).state={popout:null,actionsLog:[],obj:e.fetchedUser.objects,but:Object.fromEntries(e.fetchedUser.objects.map((function(e){return[e[0],"commerce"]})))},a.openDefault=a.openDefault.bind(Object(R.a)(a)),a.closePopout=a.closePopout.bind(Object(R.a)(a)),a.go_home_andreg=a.go_home_andreg.bind(Object(R.a)(a)),a.changbutt=a.changbutt.bind(Object(R.a)(a)),console.log(a.state.but),a}return Object(X.a)(t,e),Object(Y.a)(t,[{key:"go_home_andreg",value:function(){var e={inputId:this.props.fetchedUser.id,inputNum:this.props.fetchedUser.reg_mas.num,inputYear:this.props.fetchedUser.reg_mas.year};fetch("https://artem4ke.pythonanywhere.com/new_reg_obj/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}),this.props.go_home()}},{key:"changbutt",value:function(e){var t=this.state.but;t[e]="secondary",this.setState({but:t}),fetch("https://artem4ke.pythonanywhere.com/send_bonus_sub/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user_id:this.props.fetchedUser.id,group_id:e})}).then((function(e){return console.log(e)}))}},{key:"openDefault",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget,e.next=3,s.a.sendPromise("VKWebAppAllowMessagesFromGroup",{group_id:parseInt(a.value,10),key:""}).then((function(e){e&&n.changbutt(a.value)})).catch((function(e){return console.log("er")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"closePopout",value:function(){this.props.chang(null)}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{id:this.props.id,popout:this.state.popout},r.a.createElement(N.a,{left:r.a.createElement(z.a,{onClick:this.props.go,"data-to":"f3"},ve===P.b?r.a.createElement(D.a,null):r.a.createElement(K.a,null)),rigth:r.a.createElement(z.a,null,"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e")},"\u0425\u043e\u0447\u0435\u0448\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u043d\u0443\u0441?"),r.a.createElement(S.a,null,this.props.fetchedUser.objects.map((function(t,a){return console.log(t,a),r.a.createElement(te.a,{asideContent:r.a.createElement(_.a,{size:"l",level:e.state.but[t[0]],value:t[0],onClick:e.openDefault,"data-to":"f1"},r.a.createElement("b",null,"\u0417\u0430\u0431\u0440\u0430\u0442\u044c"))},r.a.createElement("p",null,t[1]))})),r.a.createElement("br",null),r.a.createElement(_.a,{style:{position:"relative",left:"35%"},level:"tertiary",onClick:this.go_home_andreg,"data-to":"f1"},"\u0417\u0430\u0431\u0435\u0440\u0443 \u043f\u043e\u0437\u0436\u0435")))}}]),t}(n.Component),je=function(){var e=Object(n.useState)("home0"),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("home1"),l=Object(h.a)(o,2),i=l[0],p=l[1],f=Object(n.useState)(null),g=Object(h.a)(f,2),v=g[0],y=g[1],j=Object(n.useState)(r.a.createElement(E.a,{size:"large"})),_=Object(h.a)(j,2),O=_[0],k=_[1],C=Object(n.useState)("main1"),S=Object(h.a)(C,2),U=S[0],w=S[1],P=Object(n.useState)(null),I=Object(h.a)(P,2),N=I[0],H=I[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.sendPromise("VKWebAppGetUserInfo");case 2:t=e.sent,y(t),console.log(t),k(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var z=function(e){c(e.currentTarget.dataset.to)},J=function(e){p(e.currentTarget.dataset.to)};return r.a.createElement(b.a,{activeView:U,popout:O},r.a.createElement(d.a,{id:"main0",activePanel:a},r.a.createElement(T,{id:"home0",fetchedUser:v,go:z}),r.a.createElement(oe,{id:"persik",go:z,fetchedUser:v})),r.a.createElement(d.a,{id:"main1",activePanel:i,popout:N},r.a.createElement(x,{id:"home1",fetchedUser:v,go:J}),r.a.createElement(le,{id:"f1",go:J,fetchedUser:v}),r.a.createElement(pe,{id:"f2",go:J,fetchedUser:v}),r.a.createElement(Ee,{id:"f3",go:J,fetchedUser:v}),r.a.createElement(ye,{id:"f4",go:J,fetchedUser:v,chang:function(e){H(e)},go_home:function(e){w("main0")}})))};s.a.send("VKWebAppInit"),o.a.render(r.a.createElement(je,null),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.7de16b58.chunk.js.map